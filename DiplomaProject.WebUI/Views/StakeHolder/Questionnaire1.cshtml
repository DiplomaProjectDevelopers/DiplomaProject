
@{
    ViewBag.Title = "Հարցաթերթիկի կազմում";
}

<div class="space">
    <div class="page">
        <form asp-controller="StakeHolder" asp-action="Index" method="get">
            <h2>Հարցաթերթիկի կազմում</h2>
            <div id="BranchDiv" class="profession" role="form">
                <h4>Ընտրել ճյուղը</h4>
                <select id="Branch"
                        class="Branchclass"
                        asp-items="@(new SelectList(ViewBag.ListOfBranch,"Id","Name"))">
                    <option selected disabled>ճյուղ</option>
                </select>
            </div>
            <div id="ProfessionDiv" class="profession" role="form">
                <h4>Ընտրել մասնագիտությունը</h4>
                <select id="Profession"
                        class="Professionclass"
                        asp-items="@(new SelectList(ViewBag.ListofProfession, "Id", "Name"))">
                    <option selected disabled>մասնագիտություն</option>
                </select>
            </div>
            <div id="StakeHolder" class="checkbox">
                <h4>Ընտրել շահակցին</h4>
                @foreach (var item in ViewBag.ListOfTypeName)
        {
            <input class="Checkbox" type="checkbox" id="@item.Id" value="@item.TypeName" />@item.TypeName<br />
}
            </div>
            <div id="CompanyDiv" class="company">
                <h4>Ընտրել կազմակերպությունը</h4>
                <select id="Company"
                        asp-items="@(new SelectList(ViewBag.ListofCompany,"Id", "CompanyName"))">
                    <option selected disabled>կազմակերպություն</option>
                </select>
                <div class="Azat">
                    <a class="Button" href="#" onclick="OK(); return false" data-toggle="model" data-target="#mydialog">
                        Հաստատել
                    </a>
                </div>
            </div>
            <div id="mydialog" style="display:none">
                <p>This is the default dialog which is useful for displaying information. The dialog window can be moved, resized and closed with the 'x' icon.</p>
            </div>
        </form>
    </div>
</div>


@section Styles {
    <link rel="stylesheet" href="~/custom_contents/Questionnaire1.css" />
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <link href="~/Content/Images/questionnaire.png" rel="icon" />
    <link rel="stylesheet" href="~/lib/bootstrap/dist/css/bootstrap.css">
    @*<link rel="stylesheet" href="/resources/demos/style.css">*@
}

@section Scripts{
    @*<script src="/Scripts/Questionnaire1.js" type="text/javascript"></script>*@
    <script src="~/lib/bootstrap/dist/js/bootstrap.js"></script>
    //<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
    <script type="text/javascript">
        var branchid;
        var branchtext;
        var proffid;
        var profftext;
        var companyid;
        var companytext;
        var selected = [];
        var str = "";
        var req = new XMLHttpRequest();
        var url = '@Url.Action("IndexSel", "StakeHolder")';
        var data = new FormData();
        req.open('POST', url, true);
        req.setRequestHeader('X-Requested-With', 'XMLHttpRequest');
        data.append("Content-Type", 'application/json; charset=utf-8');
        req.onload = function () {
            req.responseText;
        };
        $(document).ready(function () {
            $("#Branch").on('change',function (evt) {
                branchid = $("#Branch").val();
                branchtext = $("#Branch option:selected").text();
                data.set("branchid", branchid);
            });
            $("#Profession").change(function (evt) {
                proffid = $("#Profession").val();
                profftext = $("#Profession option:selected").text();
                data.set("profftext", profftext);
            });
            $("#Company").change(function (evt) {
                companyid = $("#Company").val();
                companytext = $("#Company option:selected").text();
                data.set("companyname", companytext);
            });
            $("#mydialog").dialog({
                autoOpen: false,
                title: 'Title',
                width: 500,
                height: 'auto',
                modal: true
            });
        });
        function OK() {
            $("#StakeHolder input:checked").each(function () {
                selected.push($(this).attr('id'));
            })
            str = selected.toString();
            data.set("stakeholderstr", str);
            alert("onclick");
            $("#mydialog").dialog("open");
           // req.send(data);
        }
    </script>
}
